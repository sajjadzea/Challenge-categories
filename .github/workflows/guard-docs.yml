name: forbid-manual-docs-edits
on:
  pull_request:
    types: [opened, synchronize, reopened]
jobs:
  check-docs:
    runs-on: ubuntu-latest
    steps:
      - name: Detect docs changes
        run: |
          echo "Base: ${{ github.base_ref }}  Head: ${{ github.head_ref }}"
          CHANGED=$(jq -r '.pull_request.number' <<< '${{ toJson(github.event) }}' > /dev/null 2>&1; true)
          # ساده: از API استفاده نکن؛ از git diff در اکشن صرف‌نظر. از path filtering خود گیت‌هاب استفاده می‌کنیم:
          exit 0
      - uses: dorny/paths-filter@v3
        id: filter
        with:
          filters: |
            docs:
              - 'docs/**'
      - name: Fail if docs/** changed
        if: steps.filter.outputs.docs == 'true'
        run: |
          echo "::error::Do not edit docs/** in PR. docs is generated by CI." && exit 1
